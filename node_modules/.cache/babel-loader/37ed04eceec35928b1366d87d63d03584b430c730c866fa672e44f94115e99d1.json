{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rlawl\\\\IdeaProjects\\\\wwoof-frontend\\\\wwoof-frontend\\\\src\\\\components\\\\login\\\\LoginForm.js\";\nimport React from \"react\";\n//import { signin } from \"./service/ApiService\";\nimport { Container, Grid, Typography, TextField, Button } from \"@mui/material\";\nimport { Form, json, redirect, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ACCESS_TOKEN = \"ACCESS_TOKEN\";\nfunction LoginForm(_ref) {\n  let {\n    method\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    method: method,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-item\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        id: \"email\",\n        className: \"form-control\",\n        placeholder: \"Email\",\n        value: this.state.email,\n        onChange: this.handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-item\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        className: \"form-control\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: this.handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-item\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-block btn-primary\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this);\n}\n_c = LoginForm;\nexport default LoginForm;\nexport async function action(_ref2) {\n  let {\n    request,\n    params\n  } = _ref2;\n  const method = request.method;\n  const data = await request.formData();\n  const signinData = {\n    email: data.get(\"email\"),\n    password: data.get(\"password\")\n  };\n  let url = \"http://localhost:8080/auth/signin\";\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n  if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  const response = await fetch(url, {\n    method: method,\n    headers: headers,\n    body: JSON.stringify(signinData)\n  });\n  const resData = await response.json();\n  if (resData.token) {\n    localStorage.setItem(ACCESS_TOKEN, resData.token);\n    alert(\"Login Success\");\n    return redirect(\"/\");\n  }\n  if (response.state === 422) {\n    return response;\n  }\n  if (!response.ok) {\n    throw json({\n      message: \"Could not save board.\"\n    }, {\n      status: 500\n    });\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","Container","Grid","Typography","TextField","Button","Form","json","redirect","Link","jsxDEV","_jsxDEV","ACCESS_TOKEN","LoginForm","_ref","method","children","className","type","name","id","placeholder","value","state","email","onChange","handleInputChange","required","fileName","_jsxFileName","lineNumber","columnNumber","password","_c","action","_ref2","request","params","data","formData","signinData","get","url","headers","Headers","accessToken","localStorage","getItem","append","response","fetch","body","JSON","stringify","resData","token","setItem","alert","ok","message","status","$RefreshReg$"],"sources":["C:/Users/rlawl/IdeaProjects/wwoof-frontend/wwoof-frontend/src/components/login/LoginForm.js"],"sourcesContent":["import React from \"react\";\r\n//import { signin } from \"./service/ApiService\";\r\nimport { Container, Grid, Typography, TextField, Button } from \"@mui/material\";\r\nimport { Form, json, redirect, Link } from \"react-router-dom\";\r\n\r\nconst ACCESS_TOKEN = \"ACCESS_TOKEN\";\r\n\r\nfunction LoginForm({ method }) {\r\n  return (\r\n    <Form method={method}>\r\n      <div className=\"form-item\">\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          id=\"email\"\r\n          className=\"form-control\"\r\n          placeholder=\"Email\"\r\n          value={this.state.email}\r\n          onChange={this.handleInputChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"form-item\">\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          className=\"form-control\"\r\n          placeholder=\"Password\"\r\n          value={this.state.password}\r\n          onChange={this.handleInputChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"form-item\">\r\n        <button type=\"submit\" className=\"btn btn-block btn-primary\">\r\n          Login\r\n        </button>\r\n      </div>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n\r\nexport async function action({ request, params }) {\r\n  const method = request.method;\r\n  const data = await request.formData();\r\n\r\n  const signinData = {\r\n    email: data.get(\"email\"),\r\n    password: data.get(\"password\"),\r\n  };\r\n\r\n  let url = \"http://localhost:8080/auth/signin\";\r\n\r\n  let headers = new Headers({\r\n    \"Content-Type\": \"application/json\",\r\n  });\r\n\r\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\r\n  if (accessToken && accessToken !== null) {\r\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\r\n  }\r\n\r\n  const response = await fetch(url, {\r\n    method: method,\r\n    headers: headers,\r\n    body: JSON.stringify(signinData),\r\n  });\r\n\r\n  const resData = await response.json();\r\n  if (resData.token) {\r\n    localStorage.setItem(ACCESS_TOKEN, resData.token);\r\n    alert(\"Login Success\");\r\n    return redirect(\"/\");\r\n  }\r\n\r\n  if (response.state === 422) {\r\n    return response;\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw json({ message: \"Could not save board.\" }, { status: 500 });\r\n  }\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB;AACA,SAASC,SAAS,EAAEC,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,QAAQ,eAAe;AAC9E,SAASC,IAAI,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9D,MAAMC,YAAY,GAAG,cAAc;AAEnC,SAASC,SAASA,CAAAC,IAAA,EAAa;EAAA,IAAZ;IAAEC;EAAO,CAAC,GAAAD,IAAA;EAC3B,oBACEH,OAAA,CAACL,IAAI;IAACS,MAAM,EAAEA,MAAO;IAAAC,QAAA,gBACnBL,OAAA;MAAKM,SAAS,EAAC,WAAW;MAAAD,QAAA,eACxBL,OAAA;QACEO,IAAI,EAAC,OAAO;QACZC,IAAI,EAAC,OAAO;QACZC,EAAE,EAAC,OAAO;QACVH,SAAS,EAAC,cAAc;QACxBI,WAAW,EAAC,OAAO;QACnBC,KAAK,EAAE,IAAI,CAACC,KAAK,CAACC,KAAM;QACxBC,QAAQ,EAAE,IAAI,CAACC,iBAAkB;QACjCC,QAAQ;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNpB,OAAA;MAAKM,SAAS,EAAC,WAAW;MAAAD,QAAA,eACxBL,OAAA;QACEO,IAAI,EAAC,UAAU;QACfC,IAAI,EAAC,UAAU;QACfC,EAAE,EAAC,UAAU;QACbH,SAAS,EAAC,cAAc;QACxBI,WAAW,EAAC,UAAU;QACtBC,KAAK,EAAE,IAAI,CAACC,KAAK,CAACS,QAAS;QAC3BP,QAAQ,EAAE,IAAI,CAACC,iBAAkB;QACjCC,QAAQ;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNpB,OAAA;MAAKM,SAAS,EAAC,WAAW;MAAAD,QAAA,eACxBL,OAAA;QAAQO,IAAI,EAAC,QAAQ;QAACD,SAAS,EAAC,2BAA2B;QAAAD,QAAA,EAAC;MAE5D;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEX;AAACE,EAAA,GAlCQpB,SAAS;AAoClB,eAAeA,SAAS;AAExB,OAAO,eAAeqB,MAAMA,CAAAC,KAAA,EAAsB;EAAA,IAArB;IAAEC,OAAO;IAAEC;EAAO,CAAC,GAAAF,KAAA;EAC9C,MAAMpB,MAAM,GAAGqB,OAAO,CAACrB,MAAM;EAC7B,MAAMuB,IAAI,GAAG,MAAMF,OAAO,CAACG,QAAQ,CAAC,CAAC;EAErC,MAAMC,UAAU,GAAG;IACjBhB,KAAK,EAAEc,IAAI,CAACG,GAAG,CAAC,OAAO,CAAC;IACxBT,QAAQ,EAAEM,IAAI,CAACG,GAAG,CAAC,UAAU;EAC/B,CAAC;EAED,IAAIC,GAAG,GAAG,mCAAmC;EAE7C,IAAIC,OAAO,GAAG,IAAIC,OAAO,CAAC;IACxB,cAAc,EAAE;EAClB,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EACxD,IAAIF,WAAW,IAAIA,WAAW,KAAK,IAAI,EAAE;IACvCF,OAAO,CAACK,MAAM,CAAC,eAAe,EAAE,SAAS,GAAGH,WAAW,CAAC;EAC1D;EAEA,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;IAChC3B,MAAM,EAAEA,MAAM;IACd4B,OAAO,EAAEA,OAAO;IAChBQ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,UAAU;EACjC,CAAC,CAAC;EAEF,MAAMc,OAAO,GAAG,MAAML,QAAQ,CAAC1C,IAAI,CAAC,CAAC;EACrC,IAAI+C,OAAO,CAACC,KAAK,EAAE;IACjBT,YAAY,CAACU,OAAO,CAAC5C,YAAY,EAAE0C,OAAO,CAACC,KAAK,CAAC;IACjDE,KAAK,CAAC,eAAe,CAAC;IACtB,OAAOjD,QAAQ,CAAC,GAAG,CAAC;EACtB;EAEA,IAAIyC,QAAQ,CAAC1B,KAAK,KAAK,GAAG,EAAE;IAC1B,OAAO0B,QAAQ;EACjB;EAEA,IAAI,CAACA,QAAQ,CAACS,EAAE,EAAE;IAChB,MAAMnD,IAAI,CAAC;MAAEoD,OAAO,EAAE;IAAwB,CAAC,EAAE;MAAEC,MAAM,EAAE;IAAI,CAAC,CAAC;EACnE;AACF;AAAC,IAAA3B,EAAA;AAAA4B,YAAA,CAAA5B,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}